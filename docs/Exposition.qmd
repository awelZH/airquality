---
title: "Exposition"
lightbox: true
---


```{r}
source("read_plots.R")

plots <- readRDS("plots_exposition.rds")
plots <- 
  plots |> 
  dplyr::arrange(pollutant, source, type, dplyr::desc(year)) |> 
  dplyr::mutate(
    id = 1:dplyr::n(),
    markdown = dplyr::case_when(
      year != "various" ~ build_panel(id, year, pollutant, source, type),
      TRUE ~ NA
    )
  )
```


### Stickstoffdioxid

```{r}
#| label: fig-twmean-no2
get_plot(plots, "source == 'population_weighted_mean' & pollutant == 'NO2'")
```

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "NO2" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "NO2" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "NO2" & source == "population_weighted_mean_map")$markdown))`

:::

### Feinstaub PM2.5

```{r}
#| label: fig-twmean-pm25
get_plot(plots, "source == 'population_weighted_mean' & pollutant == 'PM2.5'")
```

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM2.5" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM2.5" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM2.5" & source == "population_weighted_mean_map")$markdown))`

:::

### Feinstaub PM10

```{r}
#| label: fig-twmean-pm10
get_plot(plots, "source == 'population_weighted_mean' & pollutant == 'PM10'")
```

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM10" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM10" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "PM10" & source == "population_weighted_mean_map")$markdown))`

:::

<!-- ### Russ im Feinstaub -->

<!-- ::: {.panel-tabset} -->

<!-- `r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "NO2" & source == "distribution_histogram")$markdown))` -->

<!-- ::: -->

### Ozon

#### Höchstes monatliches 98%-Percentil

```{r}
#| label: fig-twmean-o3p98
get_plot(plots, "source == 'population_weighted_mean' & pollutant == 'O3_max_98p_m1'")
```

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_max_98p_m1" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_max_98p_m1" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_max_98p_m1" & source == "population_weighted_mean_map")$markdown))`

:::

#### mittlere tägliche max. 8h-Belastung in der Sommersaison

```{r}
#| label: fig-twmean-o3peak
get_plot(plots, "source == 'population_weighted_mean' & pollutant == 'O3_peakseason_mean_d1_max_mean_h8gl'")
```

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_peakseason_mean_d1_max_mean_h8gl" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_peakseason_mean_d1_max_mean_h8gl" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "O3_peakseason_mean_d1_max_mean_h8gl" & source == "population_weighted_mean_map")$markdown))`

:::

### Stickstoffeintrag in empfindliche Ökosysteme

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "Ndep" & source == "distribution_histogram")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "Ndep" & source == "distribution_cumulative")$markdown))`

:::

::: {.panel-tabset}

`r knitr::knit(text = as.character(dplyr::filter(plots, pollutant == "Ndep" & source == "population_weighted_mean_map")$markdown))`

:::
